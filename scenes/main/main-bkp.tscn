[gd_scene load_steps=16 format=3 uid="uid://qvlyyjr0415r"]

[ext_resource type="Script" uid="uid://cq3wpk4o646pu" path="res://scenes/main/car_manager.gd" id="1_sfrvh"]
[ext_resource type="PackedScene" uid="uid://cwagfro2i0vsv" path="res://scenes/car/car.tscn" id="2_k8iuh"]
[ext_resource type="Material" uid="uid://elf0717kiy58" path="res://materials/asphalt.tres" id="3_r74tu"]

[sub_resource type="PhysicalSkyMaterial" id="PhysicalSkyMaterial_iuonh"]

[sub_resource type="Sky" id="Sky_k2fmo"]
sky_material = SubResource("PhysicalSkyMaterial_iuonh")

[sub_resource type="Environment" id="Environment_l3cfh"]
background_mode = 2
sky = SubResource("Sky_k2fmo")

[sub_resource type="BoxMesh" id="BoxMesh_ouso4"]
material = ExtResource("3_r74tu")
size = Vector3(11.25, 0.2, 50)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_blune"]
data = PackedVector3Array(-5.625, 0.099999994, 25, 5.625, 0.099999994, 25, -5.625, -0.099999994, 25, 5.625, 0.099999994, 25, 5.625, -0.099999994, 25, -5.625, -0.099999994, 25, 5.625, 0.099999994, -25, -5.625, 0.099999994, -25, 5.625, -0.099999994, -25, -5.625, 0.099999994, -25, -5.625, -0.099999994, -25, 5.625, -0.099999994, -25, 5.625, 0.099999994, 25, 5.625, 0.099999994, -25, 5.625, -0.099999994, 25, 5.625, 0.099999994, -25, 5.625, -0.099999994, -25, 5.625, -0.099999994, 25, -5.625, 0.099999994, -25, -5.625, 0.099999994, 25, -5.625, -0.099999994, -25, -5.625, 0.099999994, 25, -5.625, -0.099999994, 25, -5.625, -0.099999994, -25, 5.625, 0.099999994, 25, -5.625, 0.099999994, 25, 5.625, 0.099999994, -25, -5.625, 0.099999994, 25, -5.625, 0.099999994, -25, 5.625, 0.099999994, -25, -5.625, -0.099999994, 25, 5.625, -0.099999994, 25, -5.625, -0.099999994, -25, 5.625, -0.099999994, 25, 5.625, -0.099999994, -25, -5.625, -0.099999994, -25)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_hyk8p"]

[sub_resource type="PlaneMesh" id="PlaneMesh_iuonh"]
material = SubResource("StandardMaterial3D_hyk8p")
size = Vector2(0.12, 4)

[sub_resource type="Curve3D" id="Curve3D_k2fmo"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -3.7742777, 0, 24.919977, 0, 0, 0, 0, 0, 0, -3.7742777, 0, 12.474802, 0, 0, 0, 0, 0, 0, -3.7742777, 0, -24.522541),
"tilts": PackedFloat32Array(0, 0, 0)
}
point_count = 3

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_k2fmo"]
points = PackedVector3Array(1.5, 0.1, 25, 1.5, -0.1, 25, 1.5, 0.1, -25, -1.5, 0.1, 25, -1.5, -0.1, 25, 1.5, -0.1, -25, -1.5, 0.1, -25, -1.5, -0.1, -25)

[sub_resource type="BoxMesh" id="BoxMesh_6q06x"]
material = ExtResource("3_r74tu")
size = Vector3(3, 0.2, 50)

[sub_resource type="PlaneMesh" id="PlaneMesh_hyk8p"]
material = SubResource("StandardMaterial3D_hyk8p")
size = Vector2(0.12, 6)

[sub_resource type="PlaneMesh" id="PlaneMesh_k2fmo"]
material = SubResource("StandardMaterial3D_hyk8p")
size = Vector2(0.12, 2)

[node name="Main" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.9928138, 0.03556063, -0.11426334, 0.119669, -0.29502282, 0.9479667, 0, -0.95482826, -0.29715824, 0, 11.347232, 0)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_l3cfh")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(-4.371139e-08, -0.6156615, 0.7880108, 0, 0.7880108, 0.6156615, -1, 2.6911419e-08, -3.4445044e-08, 11.813, 9.29, 0)

[node name="Highway" type="Node3D" parent="."]

[node name="Main Road" type="StaticBody3D" parent="Highway" node_paths=PackedStringArray("lane1_node", "lane2_node", "lane3_node")]
script = ExtResource("1_sfrvh")
car_scene = ExtResource("2_k8iuh")
lane1_node = NodePath("Lane 1/Path3D")
lane2_node = NodePath("Lane 2/Path3D")
lane3_node = NodePath("Lane 3/Path3D")
car_type_calm = 80.0
car_type_mediocre = 70.0
car_type_aggresive = 45.0

[node name="MeshInstance3D" type="MeshInstance3D" parent="Highway/Main Road"]
mesh = SubResource("BoxMesh_ouso4")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Highway/Main Road"]
shape = SubResource("ConcavePolygonShape3D_blune")

[node name="Strips" type="Node3D" parent="Highway/Main Road"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.11, 0)

[node name="row" type="Node3D" parent="Highway/Main Road/Strips"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 23)

[node name="Strip" type="MeshInstance3D" parent="Highway/Main Road/Strips/row"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.81, 0, 0)
mesh = SubResource("PlaneMesh_iuonh")
skeleton = NodePath("../..")

[node name="Strip2" type="MeshInstance3D" parent="Highway/Main Road/Strips/row"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.94, 0, 0)
mesh = SubResource("PlaneMesh_iuonh")
skeleton = NodePath("../..")

[node name="row2" type="Node3D" parent="Highway/Main Road/Strips"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 13)

[node name="Strip" type="MeshInstance3D" parent="Highway/Main Road/Strips/row2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.81, 0, 0)
mesh = SubResource("PlaneMesh_iuonh")
skeleton = NodePath("../..")

[node name="Strip2" type="MeshInstance3D" parent="Highway/Main Road/Strips/row2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.94, 0, 0)
mesh = SubResource("PlaneMesh_iuonh")
skeleton = NodePath("../..")

[node name="row3" type="Node3D" parent="Highway/Main Road/Strips"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 3)

[node name="Strip" type="MeshInstance3D" parent="Highway/Main Road/Strips/row3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.81, 0, 0)
mesh = SubResource("PlaneMesh_iuonh")
skeleton = NodePath("../..")

[node name="Strip2" type="MeshInstance3D" parent="Highway/Main Road/Strips/row3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.94, 0, 0)
mesh = SubResource("PlaneMesh_iuonh")
skeleton = NodePath("../..")

[node name="row4" type="Node3D" parent="Highway/Main Road/Strips"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -7)

[node name="Strip" type="MeshInstance3D" parent="Highway/Main Road/Strips/row4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.81, 0, 0)
mesh = SubResource("PlaneMesh_iuonh")
skeleton = NodePath("../..")

[node name="Strip2" type="MeshInstance3D" parent="Highway/Main Road/Strips/row4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.94, 0, 0)
mesh = SubResource("PlaneMesh_iuonh")
skeleton = NodePath("../..")

[node name="row5" type="Node3D" parent="Highway/Main Road/Strips"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -17)

[node name="Strip" type="MeshInstance3D" parent="Highway/Main Road/Strips/row5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.81, 0, 0)
mesh = SubResource("PlaneMesh_iuonh")
skeleton = NodePath("../..")

[node name="Strip2" type="MeshInstance3D" parent="Highway/Main Road/Strips/row5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.94, 0, 0)
mesh = SubResource("PlaneMesh_iuonh")
skeleton = NodePath("../..")

[node name="row6" type="Node3D" parent="Highway/Main Road/Strips"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -27)

[node name="Strip" type="MeshInstance3D" parent="Highway/Main Road/Strips/row6"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.81, 0, 0)
mesh = SubResource("PlaneMesh_iuonh")
skeleton = NodePath("../..")

[node name="Strip2" type="MeshInstance3D" parent="Highway/Main Road/Strips/row6"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.94, 0, 0)
mesh = SubResource("PlaneMesh_iuonh")
skeleton = NodePath("../..")

[node name="Lane 1" type="Node3D" parent="Highway/Main Road"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.1, 0)

[node name="Path3D" type="Path3D" parent="Highway/Main Road/Lane 1"]
curve = SubResource("Curve3D_k2fmo")
debug_custom_color = Color(1, 0, 0, 1)

[node name="Car2" parent="Highway/Main Road/Lane 1/Path3D" instance=ExtResource("2_k8iuh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.7742777, 1, 11.042129)
v_offset = 1.0

[node name="Car3" parent="Highway/Main Road/Lane 1/Path3D" instance=ExtResource("2_k8iuh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.774278, 1, -6.2100215)
progress = 31.13
v_offset = 1.0

[node name="Lane 2" type="Node3D" parent="Highway/Main Road"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.1, 0)

[node name="Path3D" type="Path3D" parent="Highway/Main Road/Lane 2"]
curve = SubResource("Curve3D_k2fmo")
debug_custom_color = Color(1, 0, 0, 1)

[node name="Car2" parent="Highway/Main Road/Lane 2/Path3D" instance=ExtResource("2_k8iuh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.774278, 1, 18.169947)
progress = 6.75
v_offset = 1.0

[node name="Car3" parent="Highway/Main Road/Lane 2/Path3D" instance=ExtResource("2_k8iuh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.774278, 1, -11.480014)
progress = 36.4
v_offset = 1.0

[node name="Lane 3" type="Node3D" parent="Highway/Main Road"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.417845, 0.1, 0)

[node name="Path3D" type="Path3D" parent="Highway/Main Road/Lane 3"]
curve = SubResource("Curve3D_k2fmo")
debug_custom_color = Color(1, 0, 0, 1)

[node name="Car" parent="Highway/Main Road/Lane 3/Path3D" instance=ExtResource("2_k8iuh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.7742777, 1, 24.500063)
progress = 0.4202615
v_offset = 1.0

[node name="Car2" parent="Highway/Main Road/Lane 3/Path3D" instance=ExtResource("2_k8iuh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.7742777, 1, -2.650009)
progress = 27.57
v_offset = 1.0

[node name="Runway" type="StaticBody3D" parent="Highway"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Highway/Runway"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7, 0.01, 0)
shape = SubResource("ConvexPolygonShape3D_k2fmo")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Highway/Runway"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7, 0.01, 0)
mesh = SubResource("BoxMesh_6q06x")

[node name="Strips" type="Node3D" parent="Highway/Runway"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.625, 0.12, 17)

[node name="Strip" type="MeshInstance3D" parent="Highway/Runway/Strips"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 5)
mesh = SubResource("PlaneMesh_hyk8p")
skeleton = NodePath("../..")

[node name="Strip2" type="MeshInstance3D" parent="Highway/Runway/Strips"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1)
mesh = SubResource("PlaneMesh_k2fmo")
skeleton = NodePath("../..")

[node name="Strip3" type="MeshInstance3D" parent="Highway/Runway/Strips"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -5)
mesh = SubResource("PlaneMesh_k2fmo")
skeleton = NodePath("../..")

[node name="Strip4" type="MeshInstance3D" parent="Highway/Runway/Strips"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9)
mesh = SubResource("PlaneMesh_k2fmo")
skeleton = NodePath("../..")

[node name="Strip5" type="MeshInstance3D" parent="Highway/Runway/Strips"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -13)
mesh = SubResource("PlaneMesh_k2fmo")
skeleton = NodePath("../..")

[node name="Strip6" type="MeshInstance3D" parent="Highway/Runway/Strips"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -17)
mesh = SubResource("PlaneMesh_k2fmo")
skeleton = NodePath("../..")

[node name="Strip7" type="MeshInstance3D" parent="Highway/Runway/Strips"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -21)
mesh = SubResource("PlaneMesh_k2fmo")
skeleton = NodePath("../..")

[node name="Strip8" type="MeshInstance3D" parent="Highway/Runway/Strips"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -25)
mesh = SubResource("PlaneMesh_k2fmo")
skeleton = NodePath("../..")
